{"componentChunkName":"component---src-templates-blog-post-js","path":"/vue-event-bus-tutorial/","result":{"data":{"site":{"siteMetadata":{"title":"benbrougher.tech","author":"Ben Brougher"}},"markdownRemark":{"id":"c816a11a-4746-59c7-9272-2e9bd8db7ea7","excerpt":"Note: This guide only applies to Vue 2. Vue 3 dropped support for event busses as outlined here.\nI will be working on a blog post on how to use an external…","html":"<blockquote>\n<p>Note: This guide only applies to Vue 2. Vue 3 dropped support for event busses as outlined <a href=\"https://v3.vuejs.org/guide/migration/events-api.html#overview\">here</a>.\nI will be working on a blog post on how to use an external library for this shortly.</p>\n</blockquote>\n<h1>The Problem</h1>\n<p>In Vue, sometimes there is a need to pass data between two components that are part of separate trees in the component hierarchy, for example there may be two tables on a page, and when one a user edits data in one table, data in the other must update. The table rows are part of two separate component trees. This may be what the component tree looks like:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 700px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/de1dd5cc1435ce18253396e1e77a26c2/ec605/component-layouts.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAwL/2gAMAwEAAhADEAAAAZQJjIk//8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAMRESIf/aAAgBAQABBQJAMc2IWLQjX//EABoRAAICAwAAAAAAAAAAAAAAAAACAQMREjH/2gAIAQMBAT8B3aBbXx0//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/AV2f/8QAFxAAAwEAAAAAAAAAAAAAAAAAACAxMv/aAAgBAQAGPwKEMp//xAAZEAADAQEBAAAAAAAAAAAAAAAAARExQVH/2gAIAQEAAT8hm2hKnHhYMTTGH//aAAwDAQACAAMAAAAQG+//xAAVEQEBAAAAAAAAAAAAAAAAAAABAP/aAAgBAwEBPxAYgygs/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERUXH/2gAIAQIBAT8QZfCvT//EABsQAAEFAQEAAAAAAAAAAAAAAAABESExUUGR/9oACAEBAAE/EEKiUBVCq2BrhWkGsL3RTxh//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"component layout\"\n        title=\"Hypothetical Layout of Components\"\n        src=\"/static/de1dd5cc1435ce18253396e1e77a26c2/29d31/component-layouts.jpg\"\n        srcset=\"/static/de1dd5cc1435ce18253396e1e77a26c2/e52aa/component-layouts.jpg 175w,\n/static/de1dd5cc1435ce18253396e1e77a26c2/70ebb/component-layouts.jpg 350w,\n/static/de1dd5cc1435ce18253396e1e77a26c2/29d31/component-layouts.jpg 700w,\n/static/de1dd5cc1435ce18253396e1e77a26c2/9ecec/component-layouts.jpg 1050w,\n/static/de1dd5cc1435ce18253396e1e77a26c2/ec605/component-layouts.jpg 1125w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>The Solution</h1>\n<p>How would the row component on the left communicate with a row component on the right? Normally we would pass an event from the row, up to the table, and then to the page and then back down into the table on the right and then finally the row component on the right, but it need not be this complicated. That’s where event busses come in. They provide a conduit for passing events from one component directly to another. In fact, with an event bus, there can be multiple senders and multiple receivers. This lets you use event busses in a publisher/subscriber model.</p>\n<h1>How do we make it happen?</h1>\n<p>I’ll be using the Vue.js Single File component syntax. If you have never seen this before, I would highly recommend you check out <a href=\"https://vuejs.org/v2/guide/single-file-components.html\">this portion</a> of the Vue.js documentation. I’ll also be using TypeScript to add type checking as I feel that even in examples it’s good practice to have static type checking as it makes some of the intent more clear.</p>\n<h2>The Event Bus</h2>\n<p>The first piece of the puzzle is the event bus itself. Here we simply instantiate a new <code class=\"language-text\">Vue</code> instance, and here we also declare an <code class=\"language-text\">enum</code>. If you’ve never seen an <code class=\"language-text\">enum</code> before it’s simply a type-safe way of defining a set of constant values, in this case a string. They are only available in type safe languages like TypeScript. We can have multiple event types fired from a single event bus so we can declare those other types in that <code class=\"language-text\">enum</code> if we need to. This is what the event bus declaration looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// myEventBus.ts</span>\n\n<span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">enum</span> MyEventBusEvents <span class=\"token punctuation\">{</span>\n  MyTestEvent <span class=\"token operator\">=</span> <span class=\"token string\">'my_test_event'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> myEventBus <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Here we import vue, declare our event types and then instantiate a new Vue instance. This is all we need to do to create a new event bus.</p>\n<h2>The Sender</h2>\n<p>The sender is the component that emits events and sends them into the event bus. There may be multiple senders that publish events. The component looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Sender.vue --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>emitEventBusEvent<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      Fire Sender\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ts<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> myEventBus<span class=\"token punctuation\">,</span> MyEventBusEvents <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./myEventBus'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Vue<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    methods<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">emitEventBusEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        myEventBus<span class=\"token punctuation\">.</span><span class=\"token function\">$emit</span><span class=\"token punctuation\">(</span>MyEventBusEvents<span class=\"token punctuation\">.</span>MyTestEvent<span class=\"token punctuation\">,</span> <span class=\"token string\">'Hello World 1!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>We have a button in our template that has an event handler in our methods component. Then in our script tag, we import the event bus and our enum. In our <code class=\"language-text\">emitEventBusEvent</code> method we can fire an event (simillar to how a component would) by calling the <code class=\"language-text\">$emit()</code> method. The first parameter is our <code class=\"language-text\">enum</code> value, which is a string. Any parameters after this, are data parameters. They will be passed through the event bus to the listening components.</p>\n<h2>The Receiver</h2>\n<p>The receiver component is the component that subscribes to events published by the Sender (or any other component attached to the event bus). The receiver must subscribe in the <code class=\"language-text\">created()</code> hook that Vue provides as way to run code when an instance of the component is created. The receiver looks something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Receiver.vue --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span>\n  <span class=\"token punctuation\">></span></span>f\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    {{ myField }}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ts<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> myEventBus<span class=\"token punctuation\">,</span> MyEventBusEvents <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./testEventBus'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Vue<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      myField<span class=\"token operator\">:</span> <span class=\"token string\">'Not Fired Event Yet'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">created</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      myEventBus<span class=\"token punctuation\">.</span><span class=\"token function\">$on</span><span class=\"token punctuation\">(</span>MyEventBusEvents<span class=\"token punctuation\">.</span>MyTestEvent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">eventFired</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    methods<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">eventFired</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myField <span class=\"token operator\">=</span> text<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Now, when the event fires in the bus, we have an arrow function that will be called and then call our <code class=\"language-text\">eventFired</code> method, changing the text to whatever the event bus sent. It’s worth noting that just like there can be more than one listener there can also be more than one subscriber, so multiple types of components, and multiple instances of those types will all receive the events.</p>\n<h1>Conclusion</h1>\n<p>Now we have a working example of how an event bus works. Event busses are a useful feature for passing data between arbitrary components in the same application.</p>","frontmatter":{"title":"How to Use a Vue.js Event Bus","date":"March 31, 2020","description":"What are event busses in Vue.js and how do we go about using them?","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAYtxdEZECP/EABsQAQACAgMAAAAAAAAAAAAAAAEAAgMREhQx/9oACAEBAAEFAuxSWyYotF3A5L7/AP/EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAwEBPwGYj//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAgEBPwG6r//EABcQAAMBAAAAAAAAAAAAAAAAAAARMSD/2gAIAQEABj8CSKXH/8QAGhABAQEAAwEAAAAAAAAAAAAAAREAEDFBUf/aAAgBAQABPyGbCT6aLbw0d7zJXy8H/9oADAMBAAIAAwAAABAI/wD/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQMBAT8QhiH/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQIBAT8Qpqn/xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMVFB/9oACAEBAAE/EMoYNDfcjr7sug2JB0+lQopcrvyXI2LiIEVyf//Z","aspectRatio":1.492537313432836,"src":"/static/f6cfd31c6e91ab8a2533fd5b23283985/14b42/front-image.jpg","srcSet":"/static/f6cfd31c6e91ab8a2533fd5b23283985/f836f/front-image.jpg 200w,\n/static/f6cfd31c6e91ab8a2533fd5b23283985/2244e/front-image.jpg 400w,\n/static/f6cfd31c6e91ab8a2533fd5b23283985/14b42/front-image.jpg 800w,\n/static/f6cfd31c6e91ab8a2533fd5b23283985/47498/front-image.jpg 1200w,\n/static/f6cfd31c6e91ab8a2533fd5b23283985/0e329/front-image.jpg 1600w,\n/static/f6cfd31c6e91ab8a2533fd5b23283985/c3e15/front-image.jpg 4240w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"slug":"/vue-event-bus-tutorial/","previous":{"fields":{"slug":"/why-use-ienumerable/"},"frontmatter":{"title":"Why Use IEnumerable?"}},"next":null}}}